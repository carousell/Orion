# retry
`import "github.com/carousell/Orion/utils/httptripper/retry"`

* [Overview](#pkg-overview)
* [Imported Packages](#pkg-imports)
* [Index](#pkg-index)

## <a name="pkg-overview">Overview</a>
Package retry provides an implementation for retrying http requests with multiple wait strategies

## <a name="pkg-imports">Imported Packages</a>

- [github.com/carousell/Orion/utils/httptripper/strategy](./../strategy)

## <a name="pkg-index">Index</a>
* [type Option](#Option)
  * [func WithMaxRetry(max int) Option](#WithMaxRetry)
  * [func WithRetryAllMethods(retryAllMethods bool) Option](#WithRetryAllMethods)
  * [func WithRetryMethods(methods ...string) Option](#WithRetryMethods)
  * [func WithStrategy(s strategy.Strategy) Option](#WithStrategy)
* [type OptionsData](#OptionsData)
* [type Retriable](#Retriable)
  * [func NewRetry(options ...Option) Retriable](#NewRetry)

#### <a name="pkg-files">Package files</a>
[retry.go](./retry.go) [types.go](./types.go) 

## <a name="Option">type</a> [Option](./types.go#L27)
``` go
type Option func(*OptionsData)
```
Option is the interface for defining Options

### <a name="WithMaxRetry">func</a> [WithMaxRetry](./retry.go#L87)
``` go
func WithMaxRetry(max int) Option
```
WithMaxRetry set the max number of times a request is tried

### <a name="WithRetryAllMethods">func</a> [WithRetryAllMethods](./retry.go#L104)
``` go
func WithRetryAllMethods(retryAllMethods bool) Option
```
WithRetryAllMethods sets retry on all HTTP methods, overrides WithRetryMethods

### <a name="WithRetryMethods">func</a> [WithRetryMethods](./retry.go#L94)
``` go
func WithRetryMethods(methods ...string) Option
```
WithRetryMethods specifies the methods that can be retried

### <a name="WithStrategy">func</a> [WithStrategy](./retry.go#L111)
``` go
func WithStrategy(s strategy.Strategy) Option
```
WithStrategy defines the backoff strategy to be used

## <a name="OptionsData">type</a> [OptionsData](./types.go#L19-L24)
``` go
type OptionsData struct {
    MaxRetry        int
    Methods         map[string]bool
    RetryAllMethods bool
    Strategy        strategy.Strategy
}
```
OptionsData stores all options used across retry

## <a name="Retriable">type</a> [Retriable](./types.go#L11-L16)
``` go
type Retriable interface {
    //ShouldRetry should return when the failure needs to be retried
    ShouldRetry(attempt int, req *http.Request, resp *http.Response, err error) bool
    //WaitDuration should return the duration to wait before making next call
    WaitDuration(attempt int, req *http.Request, resp *http.Response, err error) time.Duration
}
```
Retriable is the interface implemented by a retrier

### <a name="NewRetry">func</a> [NewRetry](./retry.go#L71)
``` go
func NewRetry(options ...Option) Retriable
```
NewRetry creates a new retry strategy

- - -
Generated by [godoc2ghmd](https://github.com/GandalfUK/godoc2ghmd)